import{k as e,g as j,q as x,Q as g,j as _,o as w,A as N,x as d,G as p,C as y,O as S,z as C}from"./index-AR-vc5G8.js";import{C as E,u as b,o as v,r as k,l as A,c as F}from"./validation.utils-FXrHDRe8.js";import{s as G}from"./otp.apis-DeJFZJ_K.js";import{r as I}from"./RoleBasedRoute-DnszmiFU.js";import{C as f}from"./CheckboxField-DpMxX6gV.js";import{e as O}from"./regex-DBRfaSZx.js";import"./validation.message-sNiVE3QT.js";import"./SwitchBase-B-HW7py2.js";import"./useFormControl-SUgb0ygc.js";const u=({name:r,label:t,type:i="text",control:a,errors:l})=>e.jsx(E,{name:r,control:a,render:({field:n})=>e.jsxs("div",{className:"[--clr:#1f1f1f] dark:[--clr:#999999] relative flex flex-row items-center mb-4",children:[e.jsx("input",{...n,type:i,id:r,required:!0,placeholder:"",spellCheck:"false",autoComplete:"off",className:"peer text-black dark:text-white pl-2 h-[40px] min-h-[40px] pr-[40px] leading-normal appearance-none resize-none box-border text-base w-full text-inherit block text-left border border-solid bg-white dark:bg-zinc-800 rounded-[10px] m-0 p-0 outline-0 focus-visible:outline-0 focus-visible:border-teal-500 focus-visible:outline-none focus-visible:ring-4 focus-visible:ring-[#71717a2e] dark:focus-visible:ring-[#14b8a61a]"}),e.jsx("label",{htmlFor:r.toString(),className:"cursor-text text-[--clr] inline-block z-0 text-sm mb-px font-normal text-start select-none absolute duration-300 transform origin-[0] translate-x-[32px] peer-focus-visible:text-teal-500 peer-focus-visible:translate-x-[8px] peer-[:not(:placeholder-shown)]:translate-x-[8px] peer-focus-visible:translate-y-[-36px] peer-[:not(:placeholder-shown)]:translate-y-[-36px]",children:t}),e.jsxs("div",{className:"group w-[40px] absolute top-0 bottom-0 right-0 flex items-center justify-center",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",strokeLinejoin:"round",strokeLinecap:"round",viewBox:"0 0 24 24",strokeWidth:"2",fill:"none",className:`transition-colors duration-200 ${l[r]?"stroke-red-500":"stroke-[--clr] peer-focus-visible:stroke-teal-600"}`,children:[e.jsx("path",{fill:"none",d:"M0 0h24v24H0z",stroke:"none"}),e.jsx("path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0"}),e.jsx("path",{d:"M12 8v4"}),e.jsx("path",{d:"M12 16h.01"})]}),l[r]&&e.jsx("span",{className:"text-sm absolute cursor-default select-none rounded-[4px] px-1.5 opacity-0 whitespace-nowrap left-1/2 -translate-x-1/2 text-red-500 -top-8 group-hover:opacity-100 transition-opacity duration-200 bg-white shadow-md border border-gray-200",children:l[r].message})]})]})}),P="_full_1h0cy_2",T="_wrapper_1h0cy_6",R="_container_1h0cy_31",L="_formContainer_1h0cy_43",B="_signIn_1h0cy_56",U="_active_1h0cy_61",M="_signUp_1h0cy_65",V="_overlayContainer_1h0cy_77",$="_overlay_1h0cy_77",D="_overlayPanel_1h0cy_108",z="_overlayButton_1h0cy_134",W="_formButton_1h0cy_155",H="_title_1h0cy_198",q="_form_1h0cy_43",Y="_inputGroup_1h0cy_214",K="_nameFieldsContainer_1h0cy_228",Q="_checkboxGroup_1h0cy_234",s={full:P,wrapper:T,container:R,formContainer:L,signIn:B,active:U,signUp:M,overlayContainer:V,overlay:$,overlayPanel:D,overlayButton:z,formButton:W,title:H,form:q,inputGroup:Y,nameFieldsContainer:K,checkboxGroup:Q},X=()=>{const{authLogin:r}=w(),t=_(),{control:i,handleSubmit:a,getValues:l,formState:{errors:n}}=b({resolver:v(A),defaultValues:{email:"",password:"",rememberMe:!0}}),c=async()=>{const m=l("email");if(!m||!O.test(m)||!await F().email().isValid(m)){d.error(p.PLEASE_ENTER_VALID_EMAIL_TO_FORGOT_PASSWORD);return}try{(await G(m)).status===200?t(y.OTP_VERIFICATION,{state:{email:m,from:"login",statusCode:200}}):d.error(S.FAILED_TO_SEND_OTP)}catch{d.error(p.UNEXPECTED_ERROR)}},h=async m=>{try{const o=await C(m);o&&(r({token:o.token,roles:o.roles,id:o.id,username:o.username,refresh_token:o.refresh_token}),d.success(p.LOGIN_SUCCESSFULLY),setTimeout(()=>{t(I(o.roles[0]))},2e3))}catch{d.error(p.WRONG_EMAIL_OR_PASSWORD)}};return e.jsxs("form",{className:s.form,onSubmit:a(h),children:[e.jsx("h1",{className:s.title,children:"Sign In"}),e.jsx(u,{name:"email",label:"Email Address",type:"email",control:i,errors:n}),e.jsx(u,{name:"password",label:"Password",type:"password",control:i,errors:n}),e.jsxs("div",{className:"flex justify-between items-center w-full",children:[e.jsx("button",{type:"button",onClick:c,className:"text-sm text-blue-500 hover:text-blue-700 transition-colors duration-200",children:"Forgot password?"}),e.jsx(f,{name:"rememberMe",label:"Remember me",control:i,errors:n})]}),e.jsx("button",{className:s.formButton,children:"Sign In"}),e.jsx("div",{className:"flex flex-col items-center",children:e.jsx("span",{className:"w-1/5 border-b dark:border-gray-600 md:w-1/2 mx-auto"})})]})},J=()=>{const r=_(),{control:t,handleSubmit:i,formState:{errors:a}}=b({resolver:v(k),defaultValues:{first_name:"",last_name:"",email:"",password:"",confirm_password:"",receiveEmailNotifications:!0,acceptPolicy:!0}}),l=async n=>{try{const c=await N(n);if(c.status_code!==201)throw new Error(c.reason);d.success(p.REGISTER_SUCCESSFULLY),setTimeout(()=>{r(y.OTP_VERIFICATION,{state:{email:n.email,from:"register",statusCode:200}})},3e3)}catch(c){const h=c instanceof Error?c.message:"An unexpected error occurred";d.error(h)}};return e.jsxs("form",{className:s.form,onSubmit:i(l),children:[e.jsx("h1",{className:s.title,children:"Sign Up"}),e.jsxs("div",{className:s.nameFieldsContainer,children:[e.jsx("div",{className:s.inputGroup,children:e.jsx(u,{name:"first_name",label:"First Name",control:t,errors:a})}),e.jsx("div",{className:s.inputGroup,children:e.jsx(u,{name:"last_name",label:"Last Name",control:t,errors:a})})]}),e.jsx("div",{className:s.inputGroup,children:e.jsx(u,{name:"email",label:"Email Address",type:"email",control:t,errors:a})}),e.jsx("div",{className:s.inputGroup,children:e.jsx(u,{name:"password",label:"Password",type:"password",control:t,errors:a})}),e.jsx("div",{className:s.inputGroup,children:e.jsx(u,{name:"confirm_password",label:"Confirm Password",type:"password",control:t,errors:a})}),e.jsx("div",{className:s.checkboxGroup,children:e.jsx(f,{name:"acceptPolicy",label:"I agree to the terms and policy",control:t,errors:a})}),e.jsx("div",{className:s.checkboxGroup,children:e.jsx(f,{name:"receiveEmailNotifications",label:"Send me promotional emails about AuctionKoi auctions",control:t,errors:a})}),e.jsx("button",{className:s.formButton,children:"Submit"})]})},Z=({isActive:r,onToggle:t})=>e.jsx("div",{className:s.overlayContainer,children:e.jsx("div",{className:s.overlay,children:r?e.jsxs("div",{className:s.overlayPanel,children:[e.jsx("h1",{children:"Hello, Friend!"}),e.jsx("p",{children:"Enter your personal details and start journey with us"}),e.jsx("button",{className:s.overlayButton,onClick:()=>t(!1),children:"Sign In"})]}):e.jsxs("div",{className:s.overlayPanel,children:[e.jsx("h1",{children:"Welcome Back!"}),e.jsx("p",{children:"To keep connected with us please login with your personal info"}),e.jsx("button",{className:s.overlayButton,onClick:()=>t(!0),children:"Sign Up"})]})})}),ce=()=>{const[r,t]=j.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:s.full,children:e.jsx(x.div,{className:s.wrapper,initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:e.jsxs(x.div,{className:`${s.container} ${r?s.active:""}`,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.2},children:[e.jsx(x.div,{className:`${s.formContainer} ${s.signUp}`,initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.4},children:e.jsx(J,{})}),e.jsx(x.div,{className:`${s.formContainer} ${s.signIn}`,initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.4},children:e.jsx(X,{})}),e.jsx(Z,{isActive:r,onToggle:t})]})})}),e.jsx(g,{})]})};export{ce as default};
