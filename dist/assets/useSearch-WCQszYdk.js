import{g as e,ac as z,k as M,a2 as o}from"./index-lq6ltyIN.js";import{e as N}from"./Select-CJs-Iueh.js";function u({apiUrl:t,debounceTime:n=500,limit:k=8,requiresAuth:y=!1,owner_id:S,transformResponse:A=i=>i,preload:m=!1,defaultQuery:l=""}){const[i,_]=e.useState(l),[d,f]=e.useState([]),[v,w]=e.useState(!1),[x,b]=e.useState(null),[D,U]=e.useState(0),[h,C]=e.useState(0),[g,E]=e.useState(0),$=e.useRef(!1),s=e.useCallback(async(r,c)=>{var P,I;w(!0),b(null);try{let a={};if(y){const Q=z();if(!Q)throw new Error("Authentication token is required for this search");a={Authorization:`Bearer ${Q}`}}const T=await M.get(t,{params:{keyword:r,page:c,limit:k,owner_id:S||void 0},headers:a}),p=A(T.data);f(p.data),C(((P=p.pagination)==null?void 0:P.total_pages)||0),E(((I=p.pagination)==null?void 0:I.total_items)||0)}catch(a){b(a instanceof Error?a:new Error("An error occurred")),f([])}finally{w(!1)}},[t,k,y,A,S]),q=e.useCallback(N(r=>{r?(s(r,0),U(0)):(f([]),C(0),E(0))},n),[s,n]),K=e.useCallback(r=>{_(r),q(r)},[q]),L=(r,c)=>{U(c),s(i,c-1)};e.useEffect(()=>{m&&!$.current&&(s(l,0),$.current=!0)},[m,l,s]);const R=e.useMemo(()=>({results:d,totalPages:h,totalItems:g}),[d,h,g]);return{query:i,setQuery:K,...R,results:d,loading:v,error:x,page:D,totalPages:h,totalItems:g,handlePageChange:L}}const Y=(t=500)=>u({apiUrl:`${o}/kois/get-kois-owner-by-keyword`,requiresAuth:!0,preload:!0,defaultQuery:"",debounceTime:t}),j=(t,n=500)=>u({apiUrl:`${o}/kois/get-kois-owner-by-keyword-not-auth`,requiresAuth:!1,preload:!0,defaultQuery:"",debounceTime:n,owner_id:t}),F=(t=500)=>u({apiUrl:`${o}/kois/get-unverified-kois-by-keyword`,requiresAuth:!0,preload:!0,defaultQuery:"",debounceTime:t}),G=(t=500)=>u({apiUrl:`${o}/auctions`,limit:30,requiresAuth:!1,preload:!0,defaultQuery:"",debounceTime:t}),H=(t=500)=>u({apiUrl:`${o}/auctions/get-auctions-upcoming`,requiresAuth:!0,preload:!0,defaultQuery:"",debounceTime:t});export{j as a,Y as b,H as c,F as d,G as u};
