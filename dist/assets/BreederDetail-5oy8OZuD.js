import{j as y,aq as A,aB as t,g as n,k as e,a4 as D,ax as C,a6 as i,aC as x,T as E,aA as k,B as w,Q as I,t as T,D as B,x as u}from"./index-CvZ0wdb0.js";import{S as F}from"./index-lzfISeJt.js";import{A as S}from"./AccountTransactionComponent-CzQPIJdX.js";import{A as U,U as R}from"./UserDetailDialog-BXLR1YEG.js";import{f as V}from"./currencyUtils-DiCxv8hG.js";import{a as $}from"./dateTimeUtils-CQFQMvEL.js";import{a as P}from"./otp.apis-B6A-zPJ7.js";import{D as M}from"./Divider-B5cCF6n7.js";import"./payment.apis-Dv3GJbEk.js";import"./TextField-DmIMr6K4.js";import"./Select-D5OM6xxo.js";import"./useFormControl-Cz7kLNRm.js";import"./MenuItem-4CYdLiSI.js";import"./dividerClasses-D9IiBztf.js";import"./Alert-CGMiffud.js";import"./Chip-BEWcYvbG.js";import"./Box-CMC4TlbO.js";import"./regex-DBRfaSZx.js";import"./format-BOZTN9QO.js";const ie=()=>{const a=y(),{user:s,loading:h,error:l}=A();t("user_id"),t("access_token");const[f,c]=n.useState(!1),[O,p]=n.useState(),[d,j]=n.useState(!0),N=()=>j(!d),b=()=>{c(!1)},g=async()=>{const r=t("user_id"),m=t("access_token");if(!r||!m){a("/notfound");return}try{const o=await T.get(`${B}/users/${r}`,{headers:{Authorization:`Bearer ${m}`}});p(o.data),c(!0)}catch(o){console.error("Failed to fetch user data",o),u.error("Failed to fetch user data")}},v=async()=>{if(!s)return;(await P(s.email)).status==200?a("/otp-verification",{state:{email:s.email,from:"breederDetail",statusCode:200}}):alert("Failed to send OTP")};if(h)return e.jsx(D,{});if(l)return e.jsxs("div",{children:["Error: ",l]});if(!s)return e.jsx("div",{children:"No user data found"});s.role_name!==C.BREEDER&&a("/notfound");const _=()=>{u.success("Transaction request sent successfully")};return e.jsxs("div",{className:"container mx-auto mt-12 mb-36",children:[e.jsx(U,{user:s}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 m-10 transition-du bg-white",children:[e.jsxs("div",{className:" rounded-lg flex flex-col justify-around",children:[e.jsxs("div",{className:"flex flex-col p-6 items-center",children:[e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("img",{src:s.avatar_url,alt:`${s.first_name} ${s.last_name}`,className:"mb-4 w-[15rem] rounded-full"})}),s.status_name!=="VERIFIED"&&e.jsxs("button",{onClick:v,className:"bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-600 transition",children:[e.jsx(i,{icon:x,className:"mr-2"}),"Verify Account"]})]}),e.jsxs("div",{className:"pl-6 pb-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold",children:"Email"}),e.jsx("p",{className:"text-xl ",children:s.email})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold",children:"Phone Number"}),e.jsx("p",{className:"text-xl ",children:s.phone_number||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold",children:"Address"}),e.jsx("p",{className:"text-xl ",children:s.address||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold",children:"Status"}),e.jsxs("p",{className:"text-xl",children:[s.status_name," "]})]})]})]}),e.jsxs("div",{className:" md:col-span-2 rounded-lg p-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(E,{variant:"h3",children:[s.first_name," ",s.last_name]}),s.status_name==="VERIFIED"&&e.jsx(i,{icon:k,onClick:g,className:"text-2xl text-gray-400 hover:cursor-pointer"})]}),e.jsx("h2",{className:"text-2xl text-blue-500 mt-5 mb-6",children:s.role_name.charAt(0).toUpperCase()+s.role_name.slice(1)}),s.status_name=="VERIFIED"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-center items-center gap-5",children:[e.jsx("p",{className:"text-xl font-bold mb-5",children:"Account Balance:"}),e.jsx("p",{className:"text-3xl text-green-600 font-bold mb-5",children:s.account_balance!==null?V(s.account_balance):"No money"})]}),e.jsx(S,{userId:s.id,token:t("access_token")||"",onTransactionSuccess:_})]}),e.jsxs("div",{className:"text-left",children:[e.jsx(i,{icon:x,className:"mr-2"}),e.jsx(w,{onClick:N,variant:"text",color:"inherit",children:"About"}),e.jsx(M,{variant:"fullWidth"})]}),d&&e.jsxs("div",{className:"mt-6 space-y-4 m-3",children:[e.jsxs("div",{className:"flex gap-5 justify-between ",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Date of Birth"}),e.jsx("p",{children:s.date_of_birth||"Not Provided"})]}),e.jsxs("div",{className:"flex gap-5 justify-between ",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Created At"}),e.jsx("p",{children:$(s.created_at||"")})]})]})]})]}),e.jsx(R,{openModal:f,handleClose:b}),e.jsx(F,{smooth:!0}),e.jsx(I,{})]})};export{ie as default};
