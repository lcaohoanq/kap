import{F as B,l as e,ao as F,ab as T,g as n,q as A,L as M,ap as W,T as o,y as m,B as f,Q as U,ac as $,k as R,a2 as V}from"./index-lq6ltyIN.js";import{E as z}from"./Edit-DwOsR3uQ.js";import{g as K}from"./order.apis-vhOzIVJw.js";import{P as Q}from"./PaginationComponent-Kj_1YdEE.js";import{O as x}from"./orders.type-CY8k0T_M.js";import{a as b}from"./colorUtils-Bn1yoC-w.js";import{f as G}from"./currencyUtils-DiCxv8hG.js";import{u as q}from"./index-CW9BZi9S.js";import{A as v}from"./Alert-HEQPhk4A.js";import{B as r}from"./Box-4kwJJIyV.js";import{F as H,I as Y,S as J}from"./Select-CJs-Iueh.js";import{M as X}from"./MenuItem-DCqseQsN.js";import{C as Z,a as ee}from"./CardContent-Bkfly1Xf.js";import{C as te}from"./CardMedia-DgFCnfOR.js";import{C}from"./Chip-vwYYQ31Z.js";import{D as k}from"./Divider-DNZT0vps.js";import"./environment-ynMLDg3_.js";import"./useFormControl-CKNKhOLW.js";import"./dividerClasses-Dv5TcbPk.js";const se=B(e.jsx("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-7 12h-2v-2h2zm0-4h-2V6h2z"}),"Feedback"),re=i=>{const a=new Date(i.order_date),c=Math.floor((new Date().getTime()-a.getTime())/(1e3*3600*24));return i.status===x.DELIVERED&&c<=7},ae=i=>{const a=new Date(i.shipping_date),c=Math.floor((new Date().getTime()-a.getTime())/(1e3*3600*24));return i.status===x.PENDING&&c<=7},Se=()=>{const i=F();q(i.breakpoints.down("sm"));const{data:a,isLoading:h,error:c}=T(),[u,w]=n.useState([]),[ie,g]=n.useState(!0),[p,j]=n.useState(1),[S,D]=n.useState(0),_=8,[d,I]=n.useState(x.ALL),[y,P]=n.useState({}),O=A();n.useEffect(()=>{const t=async()=>{if(a)try{g(!0);const s=await K(a.id,d,p-1,_,$()||"");w(s.item),D(s.total_page)}catch(s){console.log("Error fetching orders:",s)}finally{g(!1)}},l=async()=>{try{const s=await R.get(`${V}/breeders`,{params:{page:0,limit:20}});P(s.data||[])}catch(s){console.error("Error fetching breeders:",s)}};a&&(t(),l())},[a,p,d]);const L=(t,l)=>{j(l)},E=t=>{I(t),j(1)},N=t=>{O(`order-detail/${t}`)};return h?e.jsx(M,{}):c?e.jsx(W,{children:e.jsx(v,{severity:"error",children:"Error"})}):a?e.jsxs("div",{className:"",children:[e.jsx(r,{sx:{my:4},children:e.jsx(r,{sx:{display:"flex",justifyContent:"flex-end",mb:2,mr:3},children:e.jsxs(H,{sx:{minWidth:200},children:[e.jsx(Y,{children:"Order Status"}),e.jsx(J,{value:d,label:"Order Status",onChange:t=>E(t.target.value),children:Object.values(x).map(t=>e.jsx(X,{value:t,sx:{color:b(t)},children:t},t))})]})})}),u.length===0?e.jsx("div",{className:"flex justify-center",children:e.jsxs(o,{variant:"h6",children:["Empty ",d," order"]})}):e.jsxs(e.Fragment,{children:[u.map(t=>{var l;return e.jsxs(Z,{onClick:()=>N(t.id),sx:{cursor:"pointer",display:"flex",flexDirection:"row",margin:3,overflow:"hidden",position:"relative"},children:[t.order_details[0].koi.thumbnail&&e.jsx(r,{sx:{position:"absolute",left:0,top:0,bottom:0,width:"20%",overflow:"hidden"},children:e.jsx(te,{component:"img",sx:{height:"100%",width:"100%",objectFit:"contain",objectPosition:"center",backgroundColor:"#1365b4"},image:t.order_details[0].koi.thumbnail,alt:"Koi"})}),e.jsxs(ee,{sx:{flexGrow:1,display:"flex",flexDirection:"column",p:3,marginLeft:"20%"},children:[e.jsxs(r,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",mb:2},children:[y.data.find(s=>s.id===t.order_details[0].koi.owner_id)&&e.jsxs("div",{className:"flex",children:[e.jsx(m,{to:`/breeder/${t.order_details[0].koi.owner_id}/info`,onClick:s=>s.stopPropagation(),className:"inline mt-3 mr-1",children:e.jsx("img",{src:(l=y.data.find(s=>s.id===t.order_details[0].koi.owner_id))==null?void 0:l.avatar_url,alt:"Breeder Avatar",className:"w-[40px] m-0 p-0",onClick:s=>s.stopPropagation()})}),e.jsx(m,{to:`/breeder/${t.order_details[0].koi.owner_id}/info`,onClick:s=>s.stopPropagation(),className:"inline-block",children:e.jsx(f,{variant:"outlined",color:"primary",sx:{mt:1},children:"View Shop"})})]}),e.jsx(C,{label:t.status,color:b(t.status),size:"small",sx:{fontWeight:"bold"}})]}),e.jsx(k,{sx:{my:2}}),e.jsx("div",{className:"flex justify-between",children:e.jsxs("div",{children:[e.jsx(r,{sx:{display:"flex",alignItems:"center",mb:3},children:e.jsx(o,{variant:"h3",fontWeight:"medium",children:t.order_details[0].koi.name})}),e.jsx(r,{sx:{display:"flex",alignItems:"flex-start",mb:1},children:e.jsxs(o,{variant:"body2",sx:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:["Shipping Address: ",t.shipping_address]})})]})}),e.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:1,alignItems:"start",mb:2},children:[e.jsx(o,{variant:"body2",children:"Quantity: x1"}),e.jsx(C,{label:"Already paid Koi price",color:"primary",variant:"outlined"})]}),ae(t)&&e.jsx(r,{sx:{mt:2,display:"flex",justifyContent:"center"},children:e.jsx(f,{component:m,to:`/order-detail/${t.id}`,variant:"contained",color:"primary",startIcon:e.jsx(z,{}),children:"Confirm Order"})}),re(t)&&e.jsx(r,{sx:{mt:2,display:"flex",justifyContent:"center"},children:e.jsx(f,{component:m,to:`/order-detail/${t.id}`,variant:"contained",color:"primary",startIcon:e.jsx(se,{}),children:"Leave Feedback"})}),e.jsx(k,{sx:{my:2}}),e.jsxs(r,{sx:{display:"flex",alignItems:"center",justifyContent:"end",mb:1},children:["Total Shipping Fee: Â ",e.jsx(o,{variant:"h4",fontWeight:"bold",color:"#1365b4",children:G(t.total_money)})]}),e.jsxs(r,{sx:{display:"flex",flexDirection:"column",alignItems:"start",justifyContent:"center"},children:[e.jsxs(o,{color:"#808080",variant:"body2",children:["Order created at:"," ",new Date(t.order_date).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})]}),e.jsxs(o,{variant:"body2",fontWeight:"normal",color:"#808080",children:["Only click Received when you have ",e.jsx("br",{}),"received the product without any problem."]})]})]})]},t.id)}),e.jsx(r,{sx:{mt:4,display:"flex",justifyContent:"center"},children:e.jsx(Q,{totalPages:S,currentPage:p,onPageChange:L})})]}),e.jsx(U,{})]}):e.jsx(v,{severity:"info",children:"No user data found"})};export{Se as default};
