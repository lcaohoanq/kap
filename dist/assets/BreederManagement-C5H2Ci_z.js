import{g as a,j as U,k as e,av as L,aw as O,ax as P,aa as $,ay as F,B as b,am as Y,a0 as H,a1 as W,x as o,L as G,ap as z,T as q,aU as A,_ as B,$ as M}from"./index-AR-vc5G8.js";import{C as J,A as K}from"./CustomButton-BJJhcQ9Z.js";import{u as Q,s as V,a as X}from"./user.apis-Dlrjsr3M.js";import{a as Z}from"./breeder.apis-BFay7hvp.js";import{P as ee}from"./PaginationComponent-uQg9GVCj.js";import{C as w}from"./CrudButtonComponent-D_ki3HyG.js";import{T as se,a as te}from"./tableHeader-DLmPWaem.js";import{e as _}from"./dataConverter-DUStkNR_.js";import{F as ae,I as re,S as ne}from"./Select-DxrLQvkV.js";import{M as oe}from"./MenuItem-B-jXWqVy.js";import{S as ie}from"./Snackbar-D1FtQLbM.js";import{A as ce}from"./Alert-COHT3LuI.js";import"./Box-BNjxVqqI.js";import"./dateTimeUtils-BcV6LRrk.js";import"./format-BOZTN9QO.js";import"./useFormControl-SUgb0ygc.js";import"./dividerClasses-XtBg11Mw.js";import"./ClickAwayListener-DguIYcM5.js";const le=({open:l,onClose:d,onInputChange:y})=>{const[u,p]=a.useState([]),[i,m]=a.useState(""),[x,h]=a.useState(!1),[S,f]=a.useState(!1),[N,D]=a.useState(""),g=U(),C=async()=>{const t=Y("access_token");if(!t){g("/login");return}h(!0);try{const n=await H.get(`${W}/members`,{headers:{Authorization:`Bearer ${t}`},params:{page:0,limit:50}});p(n.data.item)}catch(n){console.error("Error fetching staff list:",n)}finally{h(!1)}},R=async t=>{if(t&&t.preventDefault(),!i){o.error("Please select a member before submitting");return}try{await Q(parseInt(i),3),D("Member updated to breeder successfully"),f(!0),d()}catch(n){const E=_(n,"Failed to update member to breeder");console.error(E),o.error(E)}};a.useEffect(()=>{l&&C()},[l]);const j=t=>{m(t.target.value),y("auctioneer_id",t.target.value)};return e.jsxs(e.Fragment,{children:[e.jsxs(L,{open:l,onClose:d,maxWidth:"sm",fullWidth:!0,children:[e.jsx(O,{children:"Update Current User to Breeder"}),e.jsxs(P,{children:[e.jsxs(ae,{fullWidth:!0,variant:"standard",margin:"dense",children:[e.jsx(re,{id:"auctioneer-select-label",children:"Member"}),e.jsx(ne,{labelId:"auctioneer-select-label",id:"auctioneer-select",name:"auctioneer_id",value:i,onChange:j,label:"Auctioneer",children:u.map(t=>e.jsx(oe,{value:t.id,children:`ID: ${t.id} - ${t.first_name} ${t.last_name}`},t.id))})]}),x&&e.jsx($,{})]}),e.jsxs(F,{children:[e.jsx(b,{onClick:d,children:"Cancel"}),e.jsx(b,{onClick:t=>R(t),variant:"contained",color:"primary",disabled:x,children:x?"Submitting...":"Submit"})]})]}),e.jsx(ie,{open:S,autoHideDuration:6e3,onClose:()=>f(!1),message:N})]})},be=()=>{const[l,d]=a.useState([]),[y,u]=a.useState(!0),[p,i]=a.useState(null),[m,x]=a.useState(0),[h,S]=a.useState(0),[f,N]=a.useState(0),[D,g]=a.useState(!1),[C,R]=a.useState(!1),j=20;a.useEffect(()=>{(async()=>{u(!0);try{const r=await Z(m,j);r&&Array.isArray(r.item)?(d(r.item),S(r.total_item),N(r.total_page)):i("Unexpected data structure from API")}catch(r){const c=_(r,"Error fetching breeders");o.error(c),i(c)}finally{u(!1)}})()},[m,j]);const t=(s,r)=>{x(r)},n=()=>{g(!0)},E=async s=>{if(confirm(`${A.ARE_YOU_SURE_YOU_WANT_TO_DELETE_THIS_BREEDER} ${s}`))try{await V(s),o.success(B.DELETE_BREEDER_SUCCESS)}catch(c){const v=_(c,M.DELETE_BREEDER_FAILED);o.error(v)}},k=async s=>{if(confirm(`${A.ARE_YOU_SURE_YOU_WANT_TO_REDO_THIS_BREEDER} ${s}`))try{await X(s),o.success(B.REDO_BREEDER_SUCCESS)}catch(c){const v=_(c,M.REDO_BREEDER_FAILED);o.error(v)}},I=()=>{g(!1)},T=(s,r)=>{};return y?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx(G,{})}):p?e.jsx(z,{children:e.jsx(ce,{severity:"error",children:p})}):e.jsxs("div",{className:"m-5 overflow-x-auto",children:[e.jsxs("div",{className:"mb-6 flex justify-between",children:[e.jsx("div",{className:"border-2 border-sky-500 p-6 rounded-xl",children:e.jsxs(q,{variant:"h5",children:["Total Breeders: ",h]})}),e.jsxs(J,{onClick:n,children:[e.jsx(K,{className:"mr-2"}),"New Breeder"]})]}),e.jsxs("table",{className:"whitespace-no-wrap w-full",children:[e.jsx(se,{headers:te}),e.jsx("tbody",{className:"divide-y bg-white dark:divide-gray-700 dark:bg-gray-800",children:l.map(s=>e.jsxs("tr",{className:"text-gray-700 dark:text-gray-400",children:[e.jsx("td",{children:e.jsx("div",{className:"px-4 py-3",children:e.jsx("p",{className:"whitespace-no-wrap text-gray-900",children:s.id})})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsxs("div",{className:"relative mr-3 hidden h-[3rem] w-[3rem] rounded-full md:block",children:[e.jsx("img",{className:"w-full rounded-full object-cover",src:s.avatar_url,alt:"",loading:"lazy"}),e.jsx("div",{className:"absolute inset-0 rounded-full shadow-inner","aria-hidden":"true"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:s.first_name}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Breeder"})]})]})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:s.email}),e.jsx("td",{className:"px-4 py-3 text-sm",children:(s==null?void 0:s.phone_number)||"Not provided"}),e.jsx("td",{className:"px-4 py-3 text-sm",children:s.address}),e.jsx("td",{className:"px-4 py-3 text-sm",children:s.status_name}),e.jsx("td",{className:"px-4 py-3 text-sm",children:s.is_active?"Yes":"No"}),e.jsx("td",{className:"px-4 py-3 text-sm",children:s.is_subscription}),e.jsx("td",{className:"px-4 py-3 text-sm",children:s.account_balance}),e.jsx("td",{className:"px-4 py-3 text-sm",children:s.koi_count}),e.jsx("td",{className:"px-4 py-3 text-sm",children:s.created_at}),e.jsx("td",{className:"px-4 py-3 text-sm",children:s.updated_at}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[e.jsx(w,{onClick:()=>E(s.id),ariaLabel:"Delete breeder",svgPath:"delete.svg"}),e.jsx(w,{onClick:()=>k(s.id),ariaLabel:"Redo breeder",svgPath:"redo.svg"})]})})]},s.id))})]}),e.jsx("div",{className:"xs:flex-row xs:justify-between flex flex-col items-center border-t bg-white px-5 py-5",children:e.jsx(ee,{totalPages:f,currentPage:m,onPageChange:t})}),e.jsx(le,{open:D,onClose:I,onInputChange:T})]})};export{be as default};
