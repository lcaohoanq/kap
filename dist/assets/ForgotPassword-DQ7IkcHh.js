import{t as x,D as h,g as d,_ as v,j as b,k as e,Q as g,x as l}from"./index-CvZ0wdb0.js";import{u as y,o as P,f as j}from"./validation.utils-DYYlF31m.js";import"./regex-DBRfaSZx.js";import"./validation.message-sNiVE3QT.js";const N=async a=>{try{(await x.put(`${h}/forgot-password`,a)).status===200&&console.log("Password updated successfully")}catch(t){throw console.error("Error updating password:",t),t}},k=()=>{var u;const[a,t]=d.useState(!1),w=v(),i=b(),n=(u=w.state)==null?void 0:u.email,{register:c,handleSubmit:p,formState:{errors:r}}=y({resolver:P(j)}),o=d.useRef(null),m=()=>{o.current&&clearTimeout(o.current),o.current=window.setTimeout(()=>{l.error("You have been inactive for 3 minutes. Please try again."),setTimeout(()=>{i("/auth")},5e3)},3e5)};d.useEffect(()=>{m();const s=()=>m();return window.addEventListener("mousemove",s),window.addEventListener("keydown",s),()=>{o.current&&clearTimeout(o.current),window.removeEventListener("mousemove",s),window.removeEventListener("keydown",s)}},[]);const f=async s=>{if(!n){l.error("Email not provided. Please try again.");return}try{await N({email:n,new_password:s.password}),l.success("Password has been reset successfully"),setTimeout(()=>i("/login"),3e3)}catch{l.error("Failed to update password. Please try again.")}};return d.useEffect(()=>{n||i("/auth")},[n,i]),e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[e.jsx("h2",{className:"text-2xl mb-4",children:"Create New Password"}),e.jsxs("form",{onSubmit:p(f),className:"w-full max-w-sm",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:a?"text":"password",placeholder:"New Password",...c("password"),className:`w-full h-12 text-xl border rounded-md p-3 ${r.password?"border-red-500":"border-gray-300"}`}),e.jsx("button",{type:"button",onClick:()=>t(s=>!s),className:"absolute right-3 top-3 text-gray-600",children:a?"Hide":"Show"})]}),r.password&&e.jsx("div",{className:"text-red-500 text-sm",children:r.password.message})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("input",{type:"password",placeholder:"Confirm Password",...c("confirmPassword"),className:`w-full h-12 text-xl border rounded-md p-3 ${r.confirmPassword?"border-red-500":"border-gray-300"}`}),r.confirmPassword&&e.jsx("div",{className:"text-red-500 text-sm",children:r.confirmPassword.message})]}),e.jsx("button",{type:"submit",className:"mt-4 bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600 transition duration-300 w-full",children:"Reset Password"}),e.jsx("div",{children:"*Note: This form will expire in 3 minutes if left inactive, please complete the form within the time limit."})]}),e.jsx(g,{})]})};export{k as default};
