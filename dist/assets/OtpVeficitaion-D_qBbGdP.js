import{g as l,j as g,_ as p,k as s,B as O,Q as h,x as o,$ as T,a0 as d,E as _,a1 as C,a2 as R}from"./index-DnNoBgXv.js";import{v}from"./otp.apis-j0JHjafY.js";const I=["login","register","userDetail","managerDetail","staffDetail","breederDetail"],N=()=>{const[r,f]=l.useState(["","","","","",""]),[n,x]=l.useState(""),m=g(),i=p();l.useEffect(()=>{const e=i.state;e&&I.includes(e.from)&&e.statusCode===200&&e.email&&x(e.email)},[i]);const E=e=>t=>{const a=t.target.value,u=[...r];if(u[e]=a,f(u),a&&e<5){const c=document.getElementById(`otp-${e+1}`);c==null||c.focus()}},S=async()=>{const e=r.join("");if(e.length!==6){o.error(T.ENTER_VALID_OTP_6_DIGIT);return}const t=i.state;try{t.from==="login"?(await v(n,e),o.success(d.OTP_VERIFY_SUCCESS),setTimeout(()=>m(_.FORGOT_PASSWORD,{state:{email:n}}),3e3)):(await C(n,e),o.success(d.OTP_VERIFY_SUCCESS),o.info("Please login again to continue",{autoClose:2e3,onClose:()=>{setTimeout(()=>m("/"),1e3)}}))}catch(a){console.error(a),o.error(a.message||R.OTP_VERIFICATION_ERROR)}};return s.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-[#F1F1F1]",children:[s.jsx("h2",{className:"text-2xl mb-4",children:"Enter OTP provided"}),s.jsx("div",{className:"flex space-x-2 mb-4",children:r.map((e,t)=>s.jsx("input",{id:`otp-${t}`,type:"text",maxLength:1,value:e,onChange:E(t),className:"w-12 h-12 text-center text-xl border border-gray-300 rounded-md"},t))}),s.jsx("span",{className:"text-zinc-500 text-[12px] text-center",children:"* Please enter the 6-digits one time password (OTP) that we sent to your registered email"}),s.jsx(O,{onClick:S,variant:"contained",sx:{marginTop:"1rem"},children:"Submit"}),s.jsx(h,{})]})};export{N as default};
