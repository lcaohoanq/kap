import{g as s,o as x,k as e,T as d,B as k,aB as l,x as o}from"./index-C8O9bCtl.js";import{f as j}from"./order.apis-D1Anx0rf.js";import{R as v,s as y}from"./feedback.apis-CTun91bR.js";import{B as m}from"./Box-DbRq3Bmq.js";import{T as F}from"./TextField-DxX3ij6K.js";import"./environment-DLtSd3s7.js";import"./Select-D9tXYbtE.js";import"./useFormControl-ChFY-S-n.js";const _=({orderId:a})=>{const[f,b]=s.useState(null),[n,h]=s.useState(0),[u,g]=s.useState(""),i=x();s.useEffect(()=>{(async()=>{try{if(a){const t=await j(Number(a),l("access_token")||"");b(t)}}catch(t){console.error("Error fetching order and details:",t),o.error("Failed to fetch order details")}})()},[a]);const p=async r=>{var t;if(r.preventDefault(),!n){o.error("Please provide a rating");return}try{const c={content:u,rating:n,order_id:Number(a),user_id:((t=i==null?void 0:i.user)==null?void 0:t.id)||0};await y(c,l("access_token")||""),o.success("Feedback submitted successfully")}catch(c){console.error("Error submitting feedback:",c),o.error("Failed to submit feedback")}};return f?e.jsxs(m,{children:[e.jsx(d,{variant:"h5",gutterBottom:!0,children:"Leave Feedback"}),e.jsxs("form",{onSubmit:p,children:[e.jsxs(m,{sx:{mb:3},children:[e.jsx(d,{component:"legend",children:"Rating"}),e.jsx(v,{name:"rating",value:n,onChange:(r,t)=>{h(t)}})]}),e.jsx(F,{fullWidth:!0,multiline:!0,rows:4,variant:"outlined",label:"Your Feedback",value:u,onChange:r=>g(r.target.value),sx:{mb:3}}),e.jsx(k,{type:"submit",variant:"contained",color:"primary",children:"Submit Feedback"})]})]}):e.jsx(d,{children:"Loading..."})};export{_ as default};
