import{g as a,j as U,k as e,aJ as L,aK as O,aL as P,C as $,aM as F,B as R,aB as Y,t as H,D as W,x as o,b4 as G,a4 as z,aE as J,T as K,b2 as A,b5 as q,a0 as B,b6 as Q,a2 as M}from"./index-DnNoBgXv.js";import{C as V,A as X}from"./CustomButton-C9e5ZPeC.js";import{a as Z}from"./breeder.apis-CgFWxoj5.js";import{P as ee}from"./PaginationComponent-BvkYkrkj.js";import{C as k}from"./CrudButtonComponent-zK_IvvHq.js";import{T as se,a as te}from"./tableHeader-DHjbgUT0.js";import{e as _}from"./dataConverter-BrNZpu9w.js";import{F as ae,I as re,S as ne}from"./Select-CUVNMReu.js";import{M as oe}from"./MenuItem-BoEOSkex.js";import{S as ie}from"./Snackbar-xVgAphUa.js";import{A as ce}from"./Alert-BN2ffhqu.js";import"./Box-93Gr-_1_.js";import"./dateTimeUtils-CQFQMvEL.js";import"./format-BOZTN9QO.js";import"./useFormControl-CfpcpuJc.js";import"./dividerClasses-BYrq8pJy.js";import"./ClickAwayListener-BEWAacWo.js";const le=({open:l,onClose:d,onInputChange:y})=>{const[u,p]=a.useState([]),[i,m]=a.useState(""),[x,h]=a.useState(!1),[S,f]=a.useState(!1),[N,D]=a.useState(""),g=U(),b=async()=>{const t=Y("access_token");if(!t){g("/login");return}h(!0);try{const n=await H.get(`${W}/members`,{headers:{Authorization:`Bearer ${t}`},params:{page:0,limit:50}});p(n.data.item)}catch(n){console.error("Error fetching staff list:",n)}finally{h(!1)}},v=async t=>{if(t&&t.preventDefault(),!i){o.error("Please select a member before submitting");return}try{await G(parseInt(i),3),D("Member updated to breeder successfully"),f(!0),d()}catch(n){const E=_(n,"Failed to update member to breeder");console.error(E),o.error(E)}};a.useEffect(()=>{l&&b()},[l]);const j=t=>{m(t.target.value),y("auctioneer_id",t.target.value)};return e.jsxs(e.Fragment,{children:[e.jsxs(L,{open:l,onClose:d,maxWidth:"sm",fullWidth:!0,children:[e.jsx(O,{children:"Update Current User to Breeder"}),e.jsxs(P,{children:[e.jsxs(ae,{fullWidth:!0,variant:"standard",margin:"dense",children:[e.jsx(re,{id:"auctioneer-select-label",children:"Member"}),e.jsx(ne,{labelId:"auctioneer-select-label",id:"auctioneer-select",name:"auctioneer_id",value:i,onChange:j,label:"Auctioneer",children:u.map(t=>e.jsx(oe,{value:t.id,children:`ID: ${t.id} - ${t.first_name} ${t.last_name}`},t.id))})]}),x&&e.jsx($,{})]}),e.jsxs(F,{children:[e.jsx(R,{onClick:d,children:"Cancel"}),e.jsx(R,{onClick:t=>v(t),variant:"contained",color:"primary",disabled:x,children:x?"Submitting...":"Submit"})]})]}),e.jsx(ie,{open:S,autoHideDuration:6e3,onClose:()=>f(!1),message:N})]})},ve=()=>{const[l,d]=a.useState([]),[y,u]=a.useState(!0),[p,i]=a.useState(null),[m,x]=a.useState(0),[h,S]=a.useState(0),[f,N]=a.useState(0),[D,g]=a.useState(!1),[b,v]=a.useState(!1),j=20;a.useEffect(()=>{(async()=>{u(!0);try{const r=await Z(m,j);r&&Array.isArray(r.item)?(d(r.item),S(r.total_item),N(r.total_page)):i("Unexpected data structure from API")}catch(r){const c=_(r,"Error fetching breeders");o.error(c),i(c)}finally{u(!1)}})()},[m,j]);const t=(s,r)=>{x(r)},n=()=>{g(!0)},E=async s=>{if(confirm(`${A.ARE_YOU_SURE_YOU_WANT_TO_DELETE_THIS_BREEDER} ${s}`))try{await q(s),o.success(B.DELETE_BREEDER_SUCCESS)}catch(c){const C=_(c,M.DELETE_BREEDER_FAILED);o.error(C)}},w=async s=>{if(confirm(`${A.ARE_YOU_SURE_YOU_WANT_TO_REDO_THIS_BREEDER} ${s}`))try{await Q(s),o.success(B.REDO_BREEDER_SUCCESS)}catch(c){const C=_(c,M.REDO_BREEDER_FAILED);o.error(C)}},I=()=>{g(!1)},T=(s,r)=>{};return y?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx(z,{})}):p?e.jsx(J,{children:e.jsx(ce,{severity:"error",children:p})}):e.jsxs("div",{className:"m-5 overflow-x-auto",children:[e.jsxs("div",{className:"mb-6 flex justify-between",children:[e.jsx("div",{className:"border-2 border-sky-500 p-6 rounded-xl",children:e.jsxs(K,{variant:"h5",children:["Total Breeders: ",h]})}),e.jsxs(V,{onClick:n,children:[e.jsx(X,{className:"mr-2"}),"New Breeder"]})]}),e.jsxs("table",{className:"whitespace-no-wrap w-full",children:[e.jsx(se,{headers:te}),e.jsx("tbody",{className:"divide-y bg-white dark:divide-gray-700 dark:bg-gray-800",children:l.map(s=>e.jsxs("tr",{className:"text-gray-700 dark:text-gray-400",children:[e.jsx("td",{children:e.jsx("div",{className:"px-4 py-3",children:e.jsx("p",{className:"whitespace-no-wrap text-gray-900",children:s.id})})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsxs("div",{className:"relative mr-3 hidden h-[3rem] w-[3rem] rounded-full md:block",children:[e.jsx("img",{className:"w-full rounded-full object-cover",src:s.avatar_url,alt:"",loading:"lazy"}),e.jsx("div",{className:"absolute inset-0 rounded-full shadow-inner","aria-hidden":"true"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:s.first_name}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Breeder"})]})]})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:s.email}),e.jsx("td",{className:"px-4 py-3 text-sm",children:(s==null?void 0:s.phone_number)||"Not provided"}),e.jsx("td",{className:"px-4 py-3 text-sm",children:s.address}),e.jsx("td",{className:"px-4 py-3 text-sm",children:s.status_name}),e.jsx("td",{className:"px-4 py-3 text-sm",children:s.is_active?"Yes":"No"}),e.jsx("td",{className:"px-4 py-3 text-sm",children:s.is_subscription}),e.jsx("td",{className:"px-4 py-3 text-sm",children:s.account_balance}),e.jsx("td",{className:"px-4 py-3 text-sm",children:s.koi_count}),e.jsx("td",{className:"px-4 py-3 text-sm",children:s.created_at}),e.jsx("td",{className:"px-4 py-3 text-sm",children:s.updated_at}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[e.jsx(k,{onClick:()=>E(s.id),ariaLabel:"Delete breeder",svgPath:"delete.svg"}),e.jsx(k,{onClick:()=>w(s.id),ariaLabel:"Redo breeder",svgPath:"redo.svg"})]})})]},s.id))})]}),e.jsx("div",{className:"xs:flex-row xs:justify-between flex flex-col items-center border-t bg-white px-5 py-5",children:e.jsx(ee,{totalPages:f,currentPage:m,onPageChange:t})}),e.jsx(le,{open:D,onClose:I,onInputChange:T})]})};export{ve as default};
