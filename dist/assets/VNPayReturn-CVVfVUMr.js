import{F as x,l as e,g as a,_ as C,q as v,a8 as b,z as l,ab as S,am as R,L as T,T as o}from"./index-D5S7yFe7.js";import{C as E,a as z}from"./CardContent-BxFazY6e.js";import{B as u}from"./Box-BhEgB52r.js";import{C as I}from"./CheckCircleOutline-DlG34iop.js";const L=x([e.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),e.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime"),P=x(e.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"ErrorOutline"),D=()=>{const[n,h]=a.useState(!0),[s,p]=a.useState(null),m=C(),c=v(),{data:r}=b();return a.useEffect(()=>{const t=new URLSearchParams(m.search),d=t.get("success")==="true",i=t.get("message")||"",g=t.get("userId")||void 0,y=t.get("amount")?Number(t.get("amount")):void 0,f=t.get("responseCode")||void 0,j=t.get("paymentType")||void 0;p({success:d,message:i,userId:g,amount:y,responseCode:f,paymentType:j}),d?l.success(i):l.error(i),h(!1)},[m.search]),a.useEffect(()=>{if(!n&&s){const t=setTimeout(()=>{switch(s.paymentType){case"deposit":s.userId&&c((r==null?void 0:r.role_name)===S.BREEDER?"/breeders/":"/members/");break;case"order":c("/members/orders");break}},5e3);return()=>clearTimeout(t)}},[n,s,c,r]),e.jsx(R,{maxWidth:"sm",sx:{mt:4,mb:4},children:n?e.jsx(T,{}):e.jsx(E,{elevation:3,children:e.jsx(z,{sx:{textAlign:"center",py:4},children:s&&e.jsxs(e.Fragment,{children:[e.jsx(u,{sx:{mb:2},children:s.success?e.jsx(I,{sx:{fontSize:60,color:"success.main"}}):e.jsx(P,{sx:{fontSize:60,color:"error.main"}})}),e.jsx(o,{variant:"h5",gutterBottom:!0,fontWeight:"bold",color:s.success?"success.main":"error.main",children:s.success?"Payment Successful":"Payment Failed"}),e.jsx(o,{variant:"body1",sx:{mb:2},children:s.message}),s.amount&&e.jsxs(o,{variant:"h6",sx:{mb:1},children:["Amount: ",s.amount.toLocaleString()," VND"]}),s.responseCode&&e.jsxs(o,{variant:"body2",color:"text.secondary",children:["Response Code: ",s.responseCode]}),e.jsxs(u,{sx:{mt:3,display:"flex",alignItems:"center",justifyContent:"center"},children:[e.jsx(L,{sx:{mr:1,fontSize:20,color:"text.secondary"}}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"Redirecting in 5 seconds..."})]})]})})})})};export{D as default};
