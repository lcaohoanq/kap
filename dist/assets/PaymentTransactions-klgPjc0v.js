import{aq as _,g as n,aD as w,k as e,C as k,aE as E,T as s,ap as A,R as I,Q as O,ai as R}from"./index-CWISwWJd.js";import{P as f,c as U,d as h}from"./colorUtils-JMssKA6f.js";import{f as B}from"./currencyUtils-DiCxv8hG.js";import{P as L}from"./PaginationComponent-KRv-3E9a.js";import{g as M}from"./payment.apis-ELhGjIHc.js";import{c as W}from"./dataConverter-XHHqu_XV.js";import{u as j}from"./index-Dm24IiGc.js";import{B as r}from"./Box-CXrrZtx3.js";import{A as F}from"./Alert-DSskaV8T.js";import{F as z,I as H,S as N}from"./Select-DWOTwv4U.js";import{M as Q}from"./MenuItem-DoRT03Py.js";import{D as q}from"./Divider-B-ZWZf5-.js";import{C as V}from"./Chip-BAfn4njK.js";import"./orders.type-CY8k0T_M.js";import"./dateTimeUtils-CQFQMvEL.js";import"./format-BOZTN9QO.js";import"./useFormControl-BPgDhIut.js";import"./dividerClasses-Ck80DuqL.js";const G=o=>{const[i,c,x,m,l]=o;return new Date(i,c-1,x,m,l).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})},xe=()=>{const{user:o}=_(),[i,c]=n.useState([]),[x,m]=n.useState(!0),[l,p]=n.useState(null),[u,g]=n.useState(1),[P,C]=n.useState(0),S=8,[d,v]=n.useState(f.ALL),y=w();j(y.breakpoints.down("sm")),j(y.breakpoints.down("md"));const b=t=>{switch(t){case h.ORDER:return"Order Payment";case h.DEPOSIT:return"Deposit Payment";case h.DRAW_OUT:return"Draw Out Payment";default:return"Unknown"}};n.useEffect(()=>{o&&(async()=>{if(o)try{m(!0);const a=await M(o.id,d,u-1,S,R()||"");c(a.item),C(a.total_page)}catch{p("Error fetching payments")}finally{m(!1)}})()},[o,u,d]);const D=(t,a)=>{g(a)},T=t=>{v(t),g(1)};return x?e.jsx(r,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh"},children:e.jsx(k,{})}):l?e.jsx(F,{severity:"error",children:l}):e.jsxs(E,{maxWidth:"lg",sx:{px:{xs:2,sm:3,md:4}},children:[e.jsx(s,{variant:"h4",component:"h1",gutterBottom:!0,sx:{textAlign:"center",fontSize:{xs:"1.5rem",sm:"2rem",md:"2.5rem"}},children:"Payment Transactions"}),e.jsx(r,{sx:{display:"flex",justifyContent:"flex-end",mb:2,width:"100%"},children:e.jsxs(z,{sx:{minWidth:{xs:"100%",sm:200}},children:[e.jsx(H,{children:"Payment Status"}),e.jsx(N,{value:d,label:"Payment Status",onChange:t=>T(t.target.value),children:Object.values(f).map(t=>e.jsx(Q,{value:t,children:t},t))})]})}),i.length===0?e.jsx("div",{className:"flex flex-col justify-center items-center h-full",children:e.jsxs(s,{variant:"h6",sx:{color:"primary.main",fontWeight:"bold",textAlign:"center"},children:["Empty ",W(d)," payments"]})}):e.jsx(A,{elevation:3,children:i.map((t,a)=>e.jsxs(I.Fragment,{children:[a>0&&e.jsx(q,{}),e.jsxs(r,{sx:{p:2,display:"grid",gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr",md:"400px 200px 200px 200px auto"},alignItems:"center",gap:2},children:[e.jsxs(r,{sx:{gridColumn:{xs:"1",sm:"1 / -1",md:"auto"}},children:[e.jsxs(s,{variant:"subtitle1",children:["Payment #",t.id]}),e.jsx(s,{variant:"body2",color:"text.secondary",children:G(t.payment_date)})]}),e.jsxs(r,{sx:{gridColumn:{xs:"1",sm:"auto",md:"auto"}},children:[e.jsxs(s,{variant:"body2",children:[e.jsx("strong",{children:"Method:"})," ",t.payment_method]}),e.jsxs(s,{variant:"body2",children:[e.jsx("strong",{children:"Type:"})," ",b(t.payment_type)]})]}),e.jsxs(r,{sx:{gridColumn:{xs:"1",sm:"auto",md:"auto"}},children:[e.jsxs(s,{variant:"body2",children:[e.jsx("strong",{children:"Amount:"})," ",B(t.payment_amount)]}),t.order_id&&e.jsxs(s,{variant:"body2",children:[e.jsx("strong",{children:"Order ID:"})," ",t.order_id]}),t.bank_name&&e.jsxs(s,{variant:"body2",children:[e.jsx("strong",{children:"Bank Name:"})," ",t.bank_name]})]}),e.jsx(r,{sx:{justifySelf:{xs:"start",sm:"end"},gridColumn:{xs:"1",sm:"1 / -1",md:"auto"},mt:{xs:1,sm:2,md:0}},children:e.jsx(V,{label:t.payment_status,color:U(t.payment_status),size:"small"})})]})]},t.id))}),e.jsx(r,{sx:{mt:4,display:"flex",justifyContent:"center",width:"100%",overflow:"auto"},children:e.jsx(L,{totalPages:P,currentPage:u,onPageChange:D})}),e.jsx(O,{})]})};export{xe as default};
