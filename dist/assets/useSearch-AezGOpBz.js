import{g as e,a9 as M,k as Q,a2 as g}from"./index-D5S7yFe7.js";import{j}from"./Select-DtV6tKvQ.js";function h({apiUrl:t,debounceTime:p=500,limit:k=8,requiresAuth:S=!1,owner_id:m,transformResponse:y=o=>o,preload:A=!1,defaultQuery:u=""}){const[o,v]=e.useState(u),[i,c]=e.useState([]),[x,w]=e.useState(!1),[D,b]=e.useState(null),[L,C]=e.useState(0),[l,E]=e.useState(0),[d,U]=e.useState(0),P=e.useRef(!1),s=e.useCallback(async(r,n)=>{var _,$;w(!0),b(null);try{let a={};if(S){const q=M();if(!q)throw new Error("Authentication token is required for this search");a={Authorization:`Bearer ${q}`}}const K=await Q.get(t,{params:{keyword:r,page:n,limit:k,owner_id:m||void 0},headers:a}),f=y(K.data);c(f.data),E(((_=f.pagination)==null?void 0:_.total_pages)||0),U((($=f.pagination)==null?void 0:$.total_items)||0)}catch(a){b(a instanceof Error?a:new Error("An error occurred")),c([])}finally{w(!1)}},[t,k,S,y,m]),I=e.useCallback(j(r=>{r?(s(r,0),C(0)):(c([]),E(0),U(0))},p),[s,p]),R=e.useCallback(r=>{v(r),I(r)},[I]),T=(r,n)=>{C(n),s(o,n-1)};e.useEffect(()=>{A&&!P.current&&(s(u,0),P.current=!0)},[A,u,s]);const z=e.useMemo(()=>({results:i,totalPages:l,totalItems:d}),[i,l,d]);return{query:o,setQuery:R,...z,results:i,loading:x,error:D,page:L,totalPages:l,totalItems:d,handlePageChange:T}}const O=(t=500)=>h({apiUrl:`${g}/kois/get-kois-owner-by-keyword`,requiresAuth:!0,preload:!0,defaultQuery:"",debounceTime:t}),Y=(t=500)=>h({apiUrl:`${g}/kois/get-unverified-kois-by-keyword`,requiresAuth:!0,preload:!0,defaultQuery:"",debounceTime:t}),F=(t=500)=>h({apiUrl:`${g}/auctions/get-auctions-upcoming`,requiresAuth:!0,preload:!0,defaultQuery:"",debounceTime:t});export{F as a,Y as b,O as u};
