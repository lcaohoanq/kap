import{g as s,o as p,k as e,T as d,B as k,am as l,x as o}from"./index-AR-vc5G8.js";import{f as j}from"./order.apis-Cnx_y-RG.js";import{R as v,s as y}from"./feedback.apis-DEhXLUvO.js";import{B as m}from"./Box-BNjxVqqI.js";import{T as F}from"./TextField-B9Z4Mbip.js";import"./Select-DxrLQvkV.js";import"./useFormControl-SUgb0ygc.js";const D=({orderId:a})=>{const[f,b]=s.useState(null),[n,h]=s.useState(0),[u,g]=s.useState(""),i=p();s.useEffect(()=>{(async()=>{try{if(a){const t=await j(Number(a),l("access_token")||"");b(t)}}catch(t){console.error("Error fetching order and details:",t),o.error("Failed to fetch order details")}})()},[a]);const x=async r=>{var t;if(r.preventDefault(),!n){o.error("Please provide a rating");return}try{const c={content:u,rating:n,order_id:Number(a),user_id:((t=i==null?void 0:i.user)==null?void 0:t.id)||0};await y(c,l("access_token")||""),o.success("Feedback submitted successfully")}catch(c){console.error("Error submitting feedback:",c),o.error("Failed to submit feedback")}};return f?e.jsxs(m,{children:[e.jsx(d,{variant:"h5",gutterBottom:!0,children:"Leave Feedback"}),e.jsxs("form",{onSubmit:x,children:[e.jsxs(m,{sx:{mb:3},children:[e.jsx(d,{component:"legend",children:"Rating"}),e.jsx(v,{name:"rating",value:n,onChange:(r,t)=>{h(t)}})]}),e.jsx(F,{fullWidth:!0,multiline:!0,rows:4,variant:"outlined",label:"Your Feedback",value:u,onChange:r=>g(r.target.value),sx:{mb:3}}),e.jsx(k,{type:"submit",variant:"contained",color:"primary",children:"Submit Feedback"})]})]}):e.jsx(d,{children:"Loading..."})};export{D as default};
