import{g as t,ai as z,t as M,D as s}from"./index-C8O9bCtl.js";import{d as N}from"./Select-D9tXYbtE.js";function a({apiUrl:e,debounceTime:n=500,limit:k=8,requiresAuth:y=!1,owner_id:S,transformResponse:A=i=>i,preload:m=!1,defaultQuery:l=""}){const[i,D]=t.useState(l),[d,f]=t.useState([]),[K,w]=t.useState(!1),[_,b]=t.useState(null),[v,U]=t.useState(0),[h,C]=t.useState(0),[p,$]=t.useState(0),q=t.useRef(!1),o=t.useCallback(async(r,c)=>{var I,P;w(!0),b(null);try{let u={};if(y){const Q=z();if(!Q)throw new Error("Authentication token is required for this search");u={Authorization:`Bearer ${Q}`}}const T=await M.get(e,{params:{keyword:r,page:c,limit:k,owner_id:S||void 0},headers:u}),g=A(T.data);f(g.data),C(((I=g.pagination)==null?void 0:I.total_pages)||0),$(((P=g.pagination)==null?void 0:P.total_items)||0)}catch(u){b(u instanceof Error?u:new Error("An error occurred")),f([])}finally{w(!1)}},[e,k,y,A,S]),E=t.useCallback(N(r=>{r?(o(r,0),U(0)):(f([]),C(0),$(0))},n),[o,n]),x=t.useCallback(r=>{D(r),E(r)},[E]),L=(r,c)=>{U(c),o(i,c-1)};t.useEffect(()=>{m&&!q.current&&(o(l,0),q.current=!0)},[m,l,o]);const R=t.useMemo(()=>({results:d,totalPages:h,totalItems:p}),[d,h,p]);return{query:i,setQuery:x,...R,results:d,loading:K,error:_,page:v,totalPages:h,totalItems:p,handlePageChange:L}}const Y=(e=500)=>a({apiUrl:`${s}/kois/get-kois-owner-by-keyword`,requiresAuth:!0,preload:!0,defaultQuery:"",debounceTime:e}),j=(e,n=500)=>a({apiUrl:`${s}/kois/get-kois-owner-by-keyword-not-auth`,requiresAuth:!1,preload:!0,defaultQuery:"",debounceTime:n,owner_id:e}),F=(e=500)=>a({apiUrl:`${s}/kois/get-unverified-kois-by-keyword`,requiresAuth:!0,preload:!0,defaultQuery:"",debounceTime:e}),G=(e=500)=>a({apiUrl:`${s}/auctionkois/get-kois-by-keyword`,limit:12,requiresAuth:!1,preload:!0,defaultQuery:"",debounceTime:e}),H=(e=500)=>a({apiUrl:`${s}/auctions`,limit:30,requiresAuth:!1,preload:!0,defaultQuery:"",debounceTime:e}),J=(e=500)=>a({apiUrl:`${s}/auctions/get-auctions-upcoming`,requiresAuth:!0,preload:!0,defaultQuery:"",debounceTime:e});export{H as a,j as b,Y as c,J as d,F as e,G as u};
