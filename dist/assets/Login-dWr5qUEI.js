import{o as p,j as f,k as r,B as h,T as g,t as b,x as t,y as E,O as A,G as S,z as w}from"./index-CWISwWJd.js";import{u as _,o as j,c as T,l as O}from"./validation.utils-CXFZzciA.js";import{e as y}from"./dataConverter-XHHqu_XV.js";import{A as F,F as n}from"./AuthFormContainer-BvCOGDZ4.js";import{C as v}from"./CheckboxField-B_eSuaFx.js";import{r as N}from"./RoleBasedRoute-Dn4674Hm.js";import{e as R}from"./regex-DBRfaSZx.js";import{s as L}from"./otp.apis-C7oHugf6.js";import"./validation.message-sNiVE3QT.js";import"./dateTimeUtils-CQFQMvEL.js";import"./format-BOZTN9QO.js";import"./SwitchBase-DQjqLUR0.js";import"./useFormControl-BPgDhIut.js";const q=()=>{const{authLogin:l}=p(),i=f(),{control:o,handleSubmit:m,getValues:c,setError:M,formState:{errors:a}}=_({resolver:j(O),defaultValues:{email:"",password:"",rememberMe:!0}}),u=async()=>{const s=c("email");if(!s||!R.test(s)||!await T().email().isValid(s)){t.error(E.INVALID_EMAIL_FORGOT_PASSWORD_FORMAT);return}try{(await L(s)).status===200?i("/otp-verification",{state:{email:s,from:"login",statusCode:200}}):t.error(A.FAILED_TO_SEND_OTP)}catch{t.error(S.UNEXPECTED_ERROR)}},d=async s=>{try{const e=await w(s);e&&(l({token:e.token,roles:e.roles,id:e.id,username:e.username,refresh_token:e.refresh_token,status:e.status}),t.success("Login successfully!"),setTimeout(()=>{i(N(e.roles[0]))},2e3))}catch(e){const x=y(e,"An error occurred during login");t.error(x)}};return r.jsx(F,{children:r.jsxs("form",{className:"form flex flex-col gap-4 rounded-lg bg-white p-9 shadow-md w-full max-w-md",onSubmit:m(d),children:[r.jsx("h1",{className:"mb-6 text-4xl text-center",children:"Welcome back!"}),r.jsx(n,{name:"email",label:"Email Address",type:"email",control:o,errors:a}),r.jsx(n,{name:"password",label:"Password",type:"password",control:o,errors:a}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx(h,{size:"small",disableElevation:!0,variant:"text",color:"primary",onClick:u,children:"Forgot password?"}),r.jsx(v,{name:"rememberMe",label:"Remember me",control:o,errors:a})]}),r.jsx("button",{className:"button-submit h-12 w-full rounded-lg bg-blue-500 text-xl font-bold text-white hover:bg-blue-600 transition duration-200",type:"submit",children:"Log In"}),r.jsxs("div",{className:"flex justify-center items-center",children:[r.jsx(g,{variant:"h6",sx:{fontSize:"15px",textAlign:"center"},children:"Don't have an account?"}),r.jsx(b,{to:"/register",className:"ml-2 text-blue-500 hover:text-blue-700 font-semibold transition-colors duration-200",children:"Register here"})]})]})})};export{q as default};
