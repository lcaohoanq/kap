import{k as e,g as x,b3 as c,B as C,Q as v,ai as T,t as O,D as w,a2 as B,x as M,j as L,aB as U,T as E}from"./index-C8O9bCtl.js";import{g as D,b as F}from"./dataConverter-DguyDyP9.js";import{g as k}from"./colorUtils-Dy78mbxZ.js";import{k as P}from"./regex-DBRfaSZx.js";import{S as f,K as n}from"./validation.message-sNiVE3QT.js";import{T as m}from"./TextField-DxX3ij6K.js";import{F as j,S as N}from"./Select-D9tXYbtE.js";import{M as d}from"./MenuItem-B90xNNYm.js";import{S as G}from"./Snackbar-WPfSq9mD.js";import"./dateTimeUtils-CQFQMvEL.js";import"./format-BOZTN9QO.js";import"./orders.type-CY8k0T_M.js";import"./useFormControl-ChFY-S-n.js";import"./dividerClasses-D2cDvunu.js";import"./ClickAwayListener-CjoQ5tMM.js";const K=({items:u})=>e.jsx(e.Fragment,{children:u.map((t,l)=>e.jsx("div",{className:"m-2 transform overflow-hidden rounded-lg bg-white shadow-lg transition-transform hover:scale-105",children:e.jsxs("div",{className:"flex h-full w-[35rem]",children:[e.jsx("div",{className:"flex w-[35%] items-center justify-center bg-[#4086c7]",children:t.thumbnail?e.jsx("img",{src:t.thumbnail,alt:t.name,className:"h-full w-full object-cover"}):e.jsx("span",{className:"m-16 text-xl text-white",children:"No Image Found"})}),e.jsxs("div",{className:"mt-5 ml-5 flex flex-col h-full",children:[e.jsxs("div",{className:"p-4 flex-grow",children:[e.jsx("h2",{className:"mb-3 text-2xl font-semibold",children:t.name}),e.jsx("div",{className:`rounded-xl p-2 text-md font-bold text-white ${k(t.status_name)}`,children:t.status_name})]}),e.jsxs("div",{className:"flex flex-col justify-between gap-2 p-4 text-sm text-gray-600",children:[e.jsxs("p",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Length:"}),e.jsxs("span",{className:"text-lg text-black",children:[t.length," cm"]})]}),e.jsxs("p",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Sex:"}),e.jsx("span",{className:"text-lg text-black",children:t.gender})]}),e.jsxs("p",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Year born:"}),e.jsx("span",{className:"text-lg text-black",children:t.year_born})]}),e.jsxs("p",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Category:"}),e.jsx("span",{className:"text-lg text-black",children:D(t.category_id)})]})]})]})]})},l))}),H=1e6,W=5e7,Y={min:H,max:W},Q={min:0,max:new Date().getFullYear()},V={min:0,max:125},$=({open:u,onSuccess:t,owner_id:l})=>{const[a,g]=x.useState({name:"",base_price:"",thumbnail:"",gender:"",length:"",year_born:"",description:"Enter description here...",category_id:"",owner_id:l,status_name:"UNVERIFIED",is_display:1}),[R,_]=x.useState(!1),[y,p]=x.useState(""),[s,A]=x.useState({});x.useEffect(()=>{g(r=>({...r,owner_id:l}))},[l]);const i=r=>{const{name:o,value:h}=r.target;["length","base_price","category_id","year_born"].includes(o)&&Number(h)<0||g(b=>({...b,[o]:o==="category_id"||o==="length"||o==="year_born"?h===""?h:Number(h):h}))},I=()=>{const r={};return a.name||(r.name=n.KOI_NAME_IS_REQUIRED),P.test(a.name)||(r.name=n.KOI_NAME_MUST_FOLLOWING_FORMAT),a.base_price||(r.base_price=n.BASE_PRICE_IS_REQUIRED),(a.base_price<1e6||a.base_price>5e7)&&(r.base_price=n.BASE_PRICE_GREATER_THAN_1_MILLION),a.gender||(r.gender=n.GENDER_IS_REQUIRED),a.length||(r.length=n.LENGTH_IS_REQUIRED),(a.length<=0||a.length>=125)&&(r.length=n.LENGTH_MUST_BE_GREATER_THAN_ZERO_AND_LESS_THAN_125),a.year_born||(r.year_born=n.YEAR_BORN_IS_REQUIRED),a.year_born<0&&(r.year_born=n.YEAR_BORN_CANNOT_BE_NEGATIVE),a.year_born>new Date().getFullYear()&&(r.year_born=n.YEAR_BORN_CANNOT_BE_IN_FUTURE),a.category_id<=0&&(r.category_id=n.CATEGORY_IS_REQUIRED),a.thumbnail||(r.thumbnail=n.THUMBNAIL_URL_IS_REQUIRED),A(r),Object.keys(r).length===0},S=async()=>{if(!I()){p(f.PLEASE_FIX_THE_ERRORS_IN_THE_FORM),_(!0);return}try{const r=T();console.log(a),await O.post(`${w}/kois`,a,{headers:{Authorization:`Bearer ${r}`}}),p(f.KOI_CREATE_SUCCESS),_(!0),t()}catch(r){console.error(B.ERROR_CREATING_KOI,r),M.error(r.response.data.reason)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-center",children:[e.jsx("div",{className:"flex flex-col ",children:e.jsxs("div",{children:[e.jsx(m,{fullWidth:!0,margin:"normal",name:"name",label:c.NAME,value:a.name,sx:{backgroundColor:"white"},onChange:i,error:!!s.name,helperText:s.name}),e.jsxs(j,{fullWidth:!0,margin:"normal",error:!!s.gender,children:[e.jsxs(N,{name:"gender",value:a.gender,onChange:i,displayEmpty:!0,children:[e.jsx(d,{value:"",disabled:!0,children:"Select Gender"}),e.jsx(d,{value:"MALE",children:"Male"}),e.jsx(d,{value:"FEMALE",children:"Female"}),e.jsx(d,{value:"UNKNOWN",children:"Unknown"})]}),s.gender&&e.jsx("p",{style:{color:"red"},children:s.gender})]}),e.jsxs(j,{fullWidth:!0,margin:"normal",error:!!s.category_id,children:[e.jsxs(N,{name:"category_id",value:a.category_id,onChange:i,displayEmpty:!0,children:[e.jsx(d,{value:"",disabled:!0,children:"Select Category"}),Object.entries(F).map(([r,o])=>e.jsx(d,{value:Number(r),children:o},r))]}),s.category_id&&e.jsx("p",{style:{color:"red"},children:s.category_id})]}),e.jsxs("div",{className:"flex gap-5",children:[e.jsx(m,{fullWidth:!0,sx:{backgroundColor:"white"},margin:"normal",name:"length",label:c.LENGTH,type:"number",value:a.length||"",inputProps:V,onChange:i,error:!!s.length,helperText:s.length}),e.jsx(m,{fullWidth:!0,sx:{backgroundColor:"white"},margin:"normal",name:"year_born",label:c.YEAR_BORN,type:"number",value:a.year_born||"",inputProps:Q,onChange:i,error:!!s.year_born,helperText:s.year_born})]}),e.jsx(m,{fullWidth:!0,sx:{backgroundColor:"white"},margin:"normal",name:"thumbnail",label:c.THUMBNAIL_URL,value:a.thumbnail,onChange:i,error:!!s.thumbnail,helperText:s.thumbnail}),e.jsx(m,{fullWidth:!0,sx:{backgroundColor:"white"},margin:"normal",name:"base_price",label:c.BASE_PRICE,type:"number",value:a.base_price||"",inputProps:Y,onChange:i,error:!!s.base_price,helperText:s.base_price}),e.jsx(m,{fullWidth:!0,sx:{backgroundColor:"white"},margin:"normal",name:"description",label:c.DESCRIPTION,multiline:!0,rows:3,value:a.description,onChange:i})]})}),e.jsx("div",{className:"ml-10",children:e.jsx(K,{items:[a]})})]}),e.jsx("div",{className:"mt-3 ga-5 mx-auto",children:e.jsx(C,{onClick:S,className:"w-[10rem] h-[3rem]",variant:"contained",color:"primary",children:"Submit"})}),e.jsx(G,{open:R,autoHideDuration:6e3,onClose:()=>_(!1),message:y}),e.jsx(v,{})]})},me=()=>{const u=L(),t=()=>{setTimeout(()=>{u("/breeders")},3e3)},l=U("user_id");return x.useEffect(()=>{},[l]),e.jsxs("div",{className:"flex flex-col gap-5 bg-white mt-5 mb-24",children:[e.jsxs("div",{className:"flex flex-col justify-center items-center gap-5",children:[e.jsx(E,{variant:"h4",sx:{textAlign:"center"},children:"Add New Koi"}),e.jsx("div",{children:e.jsx(E,{variant:"body1",sx:{textAlign:"center",color:"gray"},children:"*Note: Please fill in all the required fields to create a new koi."})})]}),e.jsx($,{onSuccess:t,owner_id:parseInt(l)})]})};export{me as default};
