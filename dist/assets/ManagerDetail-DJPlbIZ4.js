import{a5 as _,g as t,j as A,aq as y,k as e,a4 as D,aB as n,a6 as o,aC as u,T as k,aA as C,B as U,Q as w,t as E,D as F,x as I}from"./index-DnNoBgXv.js";import{A as V,U as S}from"./UserDetailDialog-WID1Qyim.js";import{a as B}from"./dateTimeUtils-CQFQMvEL.js";import{a as M}from"./otp.apis-j0JHjafY.js";import{D as l}from"./Divider-DiMXUAJ6.js";import"./Alert-BN2ffhqu.js";import"./regex-DBRfaSZx.js";import"./Select-CUVNMReu.js";import"./useFormControl-CfpcpuJc.js";import"./TextField-D3d8CF4T.js";import"./format-BOZTN9QO.js";import"./dividerClasses-BYrq8pJy.js";const te=()=>{const{id:T}=_(),[h,c]=t.useState(!1),[P,f]=t.useState(null),[R,$]=t.useState(""),[O,L]=t.useState(""),a=A(),{user:s,loading:j,error:d}=y(),[m,p]=t.useState(!0),N=()=>p(!m),v=async()=>{const r=n("user_id"),x=n("access_token");if(!r||!x){a("/notfound");return}try{const i=await E.get(`${F}/users/${r}`,{headers:{Authorization:`Bearer ${x}`}});f(i.data),c(!0)}catch(i){console.error("Failed to fetch user data",i),I.error("Failed to fetch user data")}},g=async()=>{if(!s)return;(await M(s.email)).status==200?a("/otp-verification",{state:{email:s.email,from:"managerDetail",statusCode:200}}):alert("Failed to send OTP")};if(j)return e.jsx(D,{});if(d)return e.jsxs("div",{children:["Error: ",d]});if(!s)return e.jsx("div",{children:"No user data found"});s.role_name!=="MANAGER"&&a("/notfound"),n("access_token")||a("/notfound");const b=()=>{c(!1)};return e.jsxs("div",{className:"container mx-auto mt-12 mb-36",children:[e.jsx(V,{user:s}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3",children:[e.jsxs("div",{className:"rounded-lg flex flex-col justify-around mr-10 p-6",children:[e.jsxs("div",{className:"flex flex-col justify-start",children:[e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("img",{src:s.avatar_url,alt:`${s.first_name} ${s.last_name}`,className:"mb-4 w-[15rem] rounded-full"})}),s.status_name!=="VERIFIED"&&e.jsxs("button",{onClick:g,className:"bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-600 transition",children:[e.jsx(o,{icon:u,className:"mr-2"}),"Verify Account"]})]}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsx("h2",{className:"text-2xl text-black",children:"Account Details"}),e.jsx(l,{"aria-hidden":"true"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold",children:"Email"}),e.jsx("p",{children:s.email})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold",children:"Phone Number"}),e.jsx("p",{children:s.phone_number||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold",children:"Address"}),e.jsx("p",{children:s.address||"Not provided"})]}),e.jsx(l,{"aria-hidden":"true"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold",children:"Status"}),e.jsx("p",{children:s.status_name})]})]})]}),e.jsxs("div",{className:" md:col-span-2 rounded-lg p-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(k,{variant:"h4",children:[s.first_name," ",s.last_name]}),s.status_name==="VERIFIED"&&e.jsx(o,{icon:C,onClick:v,className:"text-2xl text-gray-400 hover:cursor-pointer"})]}),e.jsx("h2",{className:"text-2xl text-blue-500 mt-5 mb-6",children:s.role_name.charAt(0).toUpperCase()+s.role_name.slice(1)}),e.jsxs("div",{className:"text-left",children:[e.jsx(o,{icon:u,className:"mr-2"}),e.jsx(U,{onClick:N,variant:"text",color:"inherit",children:"About Me"}),e.jsx(l,{variant:"fullWidth"})]}),m&&e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"flex gap-5 justify-between ",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Date of Birth"}),e.jsx("p",{children:s.date_of_birth||"Not Provided"})]}),e.jsxs("div",{className:"flex gap-5 justify-between ",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Created At"}),e.jsx("p",{children:B(s.created_at||"")})]})]})]})]}),e.jsx(S,{openModal:h,handleClose:b}),e.jsx(w,{})]})};export{te as default};
